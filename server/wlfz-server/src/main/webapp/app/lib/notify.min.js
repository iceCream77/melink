!function(){define(["jquery"],function(t){"use strict";var e;return e=function(){function e(e){var n;n=this,this.settings=t.extend({},this.defaults,e),null==this.cached&&(this.cached=[])}return e.prototype.defaults={position:"top-right",speed:"fast",delay:5e3,debug:!0},e.prototype.init=function(){var e;return e=this,this.queue=t('<div class="notify-queue"></div>'),this.queue.addClass(this.settings.position),this.counter=t('<div class="notify-counter"></div>'),this.counter.addClass(this.settings.position),this.showCounter(),this.bindCounterEvent(),this.el&&this.el.remove(),this.el=t('<div id="notify"></div>'),this.tools=t('<div class="notify-tools">清除全部</div>'),this.el.append(this.counter).append(this.queue),this.el.prependTo("body")},e.prototype.bindToolsEvent=function(){var t;return t=this,this.tools.on("click",function(){return t.clear(),t.tools.remove()})},e.prototype.bindCounterEvent=function(){var e;return e=this,this.counter.on("click",function(){return e.showMessage(e.tools,e.queue),e.bindToolsEvent(),t.each(e.cached.slice(0,9),function(t,n){return e.showMessage(n),e.bindCloseEvent(n)})})},e.prototype.bindCloseEvent=function(e){var n;return n=this,t(".notify-close",e).on("click",function(){return n.cached.pop(e),e.remove(),n.showCounter()})},e.prototype.showCounter=function(){var t;return t=this.cached.length<10?this.cached.length:"9+",this.counter.html(t),0===t?this.counter.hide():this.counter.show()},e.prototype.showMessage=function(t,e){var n;return n=this,this.queue.prepend(t),t.slideDown(this.settings.speed),clearTimeout(t.timeout),this.timer(t),null==e&&(e=t),e.off(),e.on("mouseenter",function(){return clearTimeout(t.timeout)}),e.on("mouseleave",function(){return n.timer(t)})},e.prototype.timer=function(t){var e;return e=this,t.timeout=setTimeout(function(){return t.slideUp(e.settings.speed,function(){return t.remove()})},e.settings.delay)},e.prototype.show=function(e,n){var r,i;return i=this,r=t('<div class="notify border-'+this.settings.position+" notify-"+n+'">\n    <img src="/static/images/close.png" class="notify-close" title="Close">\n    <div class="notify-note">'+e+"</div>\n</div>"),this.cached.push(r),this.showCounter(),this.showMessage(r),this.bindCloseEvent(r),this.settings.debug?console.log(this.cached):void 0},e.prototype.clear=function(){var e;return e=this,this.cached.length>0&&t.each(this.cached,function(t,e){return e.remove()}),this.cached=[],this.showCounter()},e.prototype.remove=function(){return this.el.remove()},e.prototype.release=function(){return this.clear(),this.remove()},e}()})}.call(this);